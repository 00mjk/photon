diff -Naur bash-4.3.orig/config.h.in bash-4.3/config.h.in
--- bash-4.3.orig/config.h.in	2020-02-06 16:36:32.200162944 +0530
+++ bash-4.3/config.h.in	2020-02-06 16:38:36.880168931 +0530
@@ -768,6 +768,14 @@
 #undef HAVE_SETREGID
 #undef HAVE_DECL_SETREGID
 
+/* Define if you have the setregid function.  */
+#undef HAVE_SETRESGID
+#undef HAVE_DECL_SETRESGID
+
+/* Define if you have the setresuid function.  */
+#undef HAVE_SETRESUID
+#undef HAVE_DECL_SETRESUID
+
 /* Define if you have the setvbuf function.  */
 #undef HAVE_SETVBUF
 
diff -Naur bash-4.3.orig/configure bash-4.3/configure
--- bash-4.3.orig/configure	2020-02-06 16:36:32.200162944 +0530
+++ bash-4.3/configure	2020-02-06 16:41:35.148177489 +0530
@@ -10120,6 +10120,17 @@
 #define HAVE_DECL_STRSIGNAL $ac_have_decl
 _ACEOF
 
+for ac_func in setresuid setresgid
+do :
+  as_ac_var=`$as_echo "ac_cv_func_$ac_func" | $as_tr_sh`
+ac_fn_c_check_func "$LINENO" "$ac_func" "$as_ac_var"
+if eval test \"x\$"$as_ac_var"\" = x"yes"; then :
+  cat >>confdefs.h <<_ACEOF
+#define `$as_echo "HAVE_$ac_func" | $as_tr_cpp` 1
+_ACEOF
+
+fi
+done
 
 ac_fn_c_check_decl "$LINENO" "strtold" "ac_cv_have_decl_strtold" "$ac_includes_default"
 if test "x$ac_cv_have_decl_strtold" = xyes; then :
diff -Naur bash-4.3.orig/configure.ac bash-4.3/configure.ac
--- bash-4.3.orig/configure.ac	2020-02-06 16:36:32.200162944 +0530
+++ bash-4.3/configure.ac	2020-02-06 16:43:30.728183039 +0530
@@ -793,6 +793,8 @@
 AC_CHECK_DECLS([printf])
 AC_CHECK_DECLS([sbrk])
 AC_CHECK_DECLS([setregid])
+dnl AC_CHECK_DECLS[(setresuid])
+dnl AC_CHECK_DECLS[(setresgid])
 AC_CHECK_DECLS([strcpy])
 AC_CHECK_DECLS([strsignal])
 
diff -Naur bash-4.3.orig/shell.c bash-4.3/shell.c
--- bash-4.3.orig/shell.c	2020-02-06 16:36:32.180162943 +0530
+++ bash-4.3/shell.c	2020-02-06 16:45:03.400187488 +0530
@@ -1235,8 +1235,28 @@
 void
 disable_priv_mode ()
 {
-  setuid (current_user.uid);
-  setgid (current_user.gid);
+  int e;
+
+#if HAVE_SETRESUID
+  if (setresuid (current_user.uid, current_user.uid, current_user.uid) < 0)
+#else
+  if (setuid (current_user.uid) < 0)
+#endif
+    {
+      e = errno;
+      sys_error (_("cannot set uid to %d: effective uid %d"), current_user.uid, current_user.euid);
+#if defined (EXIT_ON_SETUID_FAILURE)
+      if (e == EAGAIN)
+	exit (e);
+#endif
+    }
+#if HAVE_SETRESGID
+  if (setresgid (current_user.gid, current_user.gid, current_user.gid) < 0)
+#else
+  if (setgid (current_user.gid) < 0)
+#endif
+    sys_error (_("cannot set gid to %d: effective gid %d"), current_user.gid, current_user.egid);
+
   current_user.euid = current_user.uid;
   current_user.egid = current_user.gid;
 }
